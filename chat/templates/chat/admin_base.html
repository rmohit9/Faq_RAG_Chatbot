{% extends 'chat/base.html' %}
{% load static %}

{% block title %}{% block admin_title %}Admin{% endblock %} - {{ block.super }}{% endblock %}

{% block head_content %}
    {{ block.super }}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'chat/css/admin_theme.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}

{% block content %}
<div class="admin-layout">
    <!-- Admin Sidebar Toggle Button (Mobile/Tablet) -->
    <button class="admin-sidebar-toggle" id="admin-sidebar-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Admin Sidebar Navigation -->
    <nav class="admin-sidebar" id="admin-sidebar">
        <div class="admin-sidebar-sticky">
            <div class="admin-sidebar-header">
                <span class="admin-sidebar-title">Admin Panel</span>
                <span class="admin-sidebar-subtitle">GRAPHURA</span>
            </div>
            <ul class="admin-nav-links">
                <li class="admin-nav-item {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}">
                    <a class="admin-nav-link" href="{% url 'admin_dashboard' %}">
                        <span class="nav-icon"><i class="fas fa-tachometer-alt"></i></span>
                        <span class="nav-label">Dashboard Overview</span>
                    </a>
                </li>
                <li class="admin-nav-item {% if request.resolver_match.url_name == 'bot_config_manage' %}active{% endif %}">
                    <a class="admin-nav-link" href="{% url 'bot_config_manage' %}">
                        <span class="nav-icon"><i class="fas fa-robot"></i></span>
                        <span class="nav-label">Bot Configurations</span>
                    </a>
                </li>
                <li class="admin-nav-item {% if request.resolver_match.url_name == 'faq_training' %}active{% endif %}">
                    <a class="admin-nav-link" href="{% url 'faq_training' %}">
                        <span class="nav-icon"><i class="fas fa-graduation-cap"></i></span>
                        <span class="nav-label">FAQ Training</span>
                    </a>
                </li>
                <li class="admin-nav-item {% if request.resolver_match.url_name == 'user_management' %}active{% endif %}">
                    <a class="admin-nav-link" href="{% url 'user_management' %}">
                        <span class="nav-icon"><i class="fas fa-users-cog"></i></span>
                        <span class="nav-label">User Management</span>
                    </a>
                </li>
                <li class="admin-nav-item {% if request.resolver_match.url_name == 'analytics' %}active{% endif %}">
                    <a class="admin-nav-link" href="{% url 'analytics' %}">
                        <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                        <span class="nav-label">Analytics</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- MAIN ADMIN CONTENT (fixed here) -->
    <main class="admin-main-content" id="admin-main-content">
        <!-- NAVBAR -->
        <nav class="navbar">
            <div class="container">

                <!-- Logo -->
                <a class="navbar-brand" href="{% url 'home' %}">
                    <img src="{% static 'chat/images/Graphura-logo-white.png' %}" alt="Graphura Logo"
                        style="height: 40px;">
                </a>

                <!-- Hamburger Menu -->
                <div id="navbar-toggle" class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <!-- Nav Links -->
                <ul class="nav-links" id="navbar-dropdown">
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li><a href="{% url 'chat' %}">Chat</a></li>
                    <li><a href="{% url 'about' %}">About Us</a></li>
                    <li><a href="{% url 'contact' %}">Contact Us</a></li>

                    {% if user.is_staff %}
                    <li><a href="{% url 'admin_dashboard' %}" class="nav-btn">Admin Dashboard</a></li>
                    {% else %}
                    <li><a href="{% url 'user_dashboard' %}" class="nav-btn">User Dashboard</a></li>
                    {% endif %}

                    {% if user.is_authenticated %}
                    <li><a href="{% url 'logout' %}" class="nav-btn">Logout</a></li>
                    {% else %}
                    <li><a href="{% url 'login' %}" class="nav-btn">Login</a></li>
                    {% endif %}
                </ul>

            </div>
        </nav>
        <div class="page-content">
            {% block admin_content %}
            {# Content from specific admin pages will go here #}
            {% endblock %}
        </div>
    </main>
</div>
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'chat/js/admin_dashboard.js' %}"></script>
{% endblock %}